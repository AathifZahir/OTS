{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aathi\\\\OneDrive\\\\Documents\\\\_-SLIIT-_\\\\itp\\\\OTS\\\\frontend\\\\src\\\\pages\\\\OrderPlacement\\\\ProductListPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport ProductTile from '../../components/ProductList/ProductTile';\nimport FilterOptions from '../../components/ProductList/FilterBar';\nimport SearchBar from '../../components/ProductList/SearchBar';\nimport { useHistory } from 'react';\nimport { ProductContext } from '../../context/ProductContext'; // Assuming ProductContext is located in 'context' folder\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductListPage = () => {\n  _s();\n  const history = useHistory();\n  const {\n    setSelectedProductId\n  } = useContext(ProductContext);\n  const handleProductClick = productId => {\n    setSelectedProductId(productId);\n    history.push(`/product/${productId}`);\n  };\n  const [products, setProducts] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterOptions, setFilterOptions] = useState({\n    category: '',\n    minPrice: '',\n    maxPrice: '',\n    exactRating: '' // Added state for exact rating filter\n  });\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await axios.get('/api/productlist');\n        setProducts(response.data);\n      } catch (error) {\n        console.error('Error fetching products:', error);\n      }\n    };\n    fetchProducts();\n  }, []);\n  const handleFilterChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFilterOptions({\n      ...filterOptions,\n      [name]: value\n    });\n  };\n  const filteredProducts = products.filter(product => (product.name.toLowerCase().includes(searchTerm.toLowerCase()) || product.description.toLowerCase().includes(searchTerm.toLowerCase())) && (filterOptions.category === '' || product.category.toLowerCase() === filterOptions.category.toLowerCase()) && (filterOptions.minPrice === '' || product.price >= filterOptions.minPrice) && (filterOptions.maxPrice === '' || product.price <= filterOptions.maxPrice) && (filterOptions.exactRating === '' || product.averageRating == filterOptions.exactRating) // Include exact rating filter\n  );\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto px-4 py-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"home-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search\",\n        children: /*#__PURE__*/_jsxDEV(SearchBar, {\n          setSearchTerm: setSearchTerm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col md:flex-row md:space-x-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full md:w-1/6\",\n          children: /*#__PURE__*/_jsxDEV(FilterOptions, {\n            handleFilterChange: handleFilterChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-list grid grid-cols-4 gap-4 justify-items-center w-full md:w-5/6\",\n          children: filteredProducts.map(product => /*#__PURE__*/_jsxDEV(ProductTile, {\n            product: product,\n            averageRating: product.averageRating // Pass average rating as prop\n            ,\n            numReviews: product.ratingsCount // Pass number of reviews as prop\n            ,\n            onClick: () => handleProductClick(product._id) // Pass product id to handleProductClick\n          }, product._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductListPage, \"mroWLYl1moHT80ZTIW86SyXu/Y0=\", false, function () {\n  return [useHistory];\n});\n_c = ProductListPage;\nexport default ProductListPage;\nvar _c;\n$RefreshReg$(_c, \"ProductListPage\");","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","ProductTile","FilterOptions","SearchBar","useHistory","ProductContext","jsxDEV","_jsxDEV","ProductListPage","_s","history","setSelectedProductId","handleProductClick","productId","push","products","setProducts","searchTerm","setSearchTerm","filterOptions","setFilterOptions","category","minPrice","maxPrice","exactRating","fetchProducts","response","get","data","error","console","handleFilterChange","e","name","value","target","filteredProducts","filter","product","toLowerCase","includes","description","price","averageRating","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","numReviews","ratingsCount","onClick","_id","_c","$RefreshReg$"],"sources":["C:/Users/aathi/OneDrive/Documents/_-SLIIT-_/itp/OTS/frontend/src/pages/OrderPlacement/ProductListPage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport ProductTile from '../../components/ProductList/ProductTile';\r\nimport FilterOptions from '../../components/ProductList/FilterBar';\r\nimport SearchBar from '../../components/ProductList/SearchBar';\r\nimport { useHistory } from 'react';\r\nimport { ProductContext } from '../../context/ProductContext'; // Assuming ProductContext is located in 'context' folder\r\n\r\nconst ProductListPage = () => {\r\n  const history = useHistory();\r\n  const { setSelectedProductId } = useContext(ProductContext);\r\n\r\n  const handleProductClick = (productId) => {\r\n    setSelectedProductId(productId);\r\n    history.push(`/product/${productId}`);\r\n  };\r\n\r\n  const [products, setProducts] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterOptions, setFilterOptions] = useState({\r\n    category: '',\r\n    minPrice: '',\r\n    maxPrice: '',\r\n    exactRating: '', // Added state for exact rating filter\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      try {\r\n        const response = await axios.get('/api/productlist');\r\n        setProducts(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching products:', error);\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const handleFilterChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFilterOptions({ ...filterOptions, [name]: value });\r\n  };\r\n\r\n  const filteredProducts = products.filter(product =>\r\n    (product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    product.description.toLowerCase().includes(searchTerm.toLowerCase())) &&\r\n    (filterOptions.category === '' || product.category.toLowerCase() === filterOptions.category.toLowerCase()) &&\r\n    (filterOptions.minPrice === '' || product.price >= filterOptions.minPrice) &&\r\n    (filterOptions.maxPrice === '' || product.price <= filterOptions.maxPrice) &&\r\n    (filterOptions.exactRating === '' || product.averageRating == filterOptions.exactRating) // Include exact rating filter\r\n  );\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <div className=\"home-page\">\r\n        <div className=\"search\">\r\n          <SearchBar setSearchTerm={setSearchTerm} />\r\n        </div>\r\n        <div className=\"flex flex-col md:flex-row md:space-x-6\">\r\n          <div className=\"w-full md:w-1/6\">\r\n            <FilterOptions handleFilterChange={handleFilterChange} />\r\n          </div>\r\n          <div className=\"product-list grid grid-cols-4 gap-4 justify-items-center w-full md:w-5/6\">\r\n            {filteredProducts.map(product => (\r\n              <ProductTile\r\n                key={product._id}\r\n                product={product}\r\n                averageRating={product.averageRating} // Pass average rating as prop\r\n                numReviews={product.ratingsCount} // Pass number of reviews as prop\r\n                onClick={() => handleProductClick(product._id)} // Pass product id to handleProductClick\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductListPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}